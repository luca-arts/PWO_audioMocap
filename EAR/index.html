<!DOCTYPE html>
<html>
<!--https://github.com/TakashiYoshinaga/Oculus-Quest-Interaction-Sample-->
<head>
  <meta charset="utf-8">
  <title>EAR Escape Audio Room</title>
  <meta name="description" content="EAR Escape Audio Room">
  <!-- <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script> -->
  <script src="js/aframe.1.0.4.min.js"></script>
  <!-- <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script> -->
  <!-- <script src="https://rawgit.com/fernandojsg/aframe-teleport-controls/master/dist/aframe-teleport-controls.min.js"></script> -->
  <script src="js/aframe-teleport-controls.min.js"></script>
  <!-- <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script> -->
  <!-- <script src="https://rawcdn.githack.com/kylebakerio/aframe-physics-system/f7117be8f83cb75ff870941883b7973ff92d0a34/dist/aframe-physics-system.js"></script> -->
  <script src="js/aframe-physics-system.js"></script>

  <script src="js/jquery-3.4.1.min.js"></script>
  <script src="js/ear.js"></script>
  <link rel="stylesheet" href="css/ear.css">

</head>


<body>
    <a-scene physics="debug: true" background="color: #000000" spawnlevel  light="defaultLightsEnabled: false">
    <!-- ##### ASSETS  ##### -->
        <a-assets>
            <audio id="overlord" src="snd/EAR-SynclavierOverlord.mp3"  preload="auto" ></audio>
            <audio id="lopulse" src="snd/EAR-LOPULSE.mp3"  preload="auto"></audio>
            <audio id="weirdchord" src="snd/EAR-WEIRDCHORDS.mp3"  preload="auto"></audio>
            <audio id="sinethriller" src="snd/EAR-SineThriller.mp3"  preload="auto" ></audio>
            <audio id="portal" src="snd/EAR-PORTALSOUND.mp3"  preload="auto" ></audio>
            <audio id="back01" src="snd/roomtone_background-001.mp3"  preload="auto" ></audio>
            <audio id="back02" src="snd/roomtone_background-002.mp3"  preload="auto" ></audio>
            <audio id="back03" src="snd/roomtone_background-003.mp3"  preload="auto" ></audio>
            <audio id="back04" src="snd/roomtone_background-004.mp3"  preload="auto" ></audio>
            <audio id="back05" src="snd/roomtone_background-005.mp3"  preload="auto" ></audio>
            <audio id="back06" src="snd/roomtone_background-006.mp3"  preload="auto" ></audio>
            <audio id="back07" src="snd/roomtone_background-007.mp3"  preload="auto" ></audio>
            <audio id="back08" src="snd/roomtone_background-008.mp3"  preload="auto" ></audio>
            <audio id="back09" src="snd/roomtone_background-009.mp3"  preload="auto" ></audio>
            <audio id="back10" src="snd/roomtone_background-010.mp3"  preload="auto" ></audio>
            <audio id="back11" src="snd/roomtone_background-011.mp3"  preload="auto" ></audio>
            <audio id="back12" src="snd/roomtone_background-012.mp3"  preload="auto" ></audio>
            <audio id="back13" src="snd/roomtone_background-013.mp3"  preload="auto" ></audio>
            <audio id="back14" src="snd/roomtone_background-014.mp3"  preload="auto" ></audio>
            <audio id="back15" src="snd/roomtone_background-015.mp3"  preload="auto" ></audio>
            <audio id="back16" src="snd/roomtone_background-016.mp3"  preload="auto" ></audio>
            <audio id="back17" src="snd/roomtone_background-017.mp3"  preload="auto" ></audio>
            <audio id="back18" src="snd/roomtone_background-018.mp3"  preload="auto" ></audio>
            <audio id="back19" src="snd/roomtone_background-019.mp3"  preload="auto" ></audio>
            <audio id="back20" src="snd/roomtone_background-020.mp3"  preload="auto" ></audio>


        </a-assets>
    <!-- ############ geometry ######### -->
        <a-plane id="level" static-body position="0 0 0" rotation="-90 0 0" width="50" height="50" color="#7BC8A4"
            src="img/back.png" shadow spawnlevel> 
        </a-plane>
        <!-- <a-entity light="intensity: 1; distance: 15.75; decay: 0.1; castShadow: false; type: point; color: #ef2929"></a-entity> -->
        <!-- <a-box dynamic-body position="5 0.5 0" width="1" height="1" depth="1"></a-box> -->
    
        <!-- <a-entity id="target" geometry="primitive: plane" material="color: blue" position="5 0 5" ></a-entity> -->

    <!-- ################### sound background ################## -->
        <a-entity id="backgroundsound1" sound="src:#overlord; loop: false";></a-entity>

    <!-- ################### cameraRig ########### -->



    <!-- Basic movement and teleportation https://michael-mcanally.medium.com/basic-movement-and-teleportation-in-vr-with-a-frame-114a59767ffc -->
    <a-entity id="cameraRig" 
                movement-controls="constrainToNavMesh: true;" 
                navigator="cameraRig: #cameraRig; cameraHead: #head; collisionEntities: .collision; ignoreEntities: .clickable" 
                position="0 0 0" 
                rotation="0 0 0"
                wasd-controls>
        <!-- camera -->
        <a-entity id="head" 
                    camera="active: true" 
                    position="0 1.6 0" 
                    look-controls="pointerLockEnabled: true; reverseMouseDrag: true" 
                   >
        </a-entity>
              <!-- Left Controller -->
              <a-entity id="ctlL" 
                        hand-controls="hand: left; handModelStyle: lowPoly; color: #15ACCF" 
                        teleport-controls=" cameraRig: #cameraRig; 
                                            teleportOrigin: #head; 
                                            startEvents: teleportstart; 
                                            endEvents: teleportend; 
                                            button: trigger; 
                                            curveShootingSpeed: 5; 
                                            landingMaxAngle: 60" 
                        oculus-touch-controls="hand: left" 
                        input-listen
                        visible="true">
                <a-text id="lefttext" value="Trigger: shoot a ball\nGrip: Grab large object\nX: Teleport" position="0 0.08 0"
                rotation="-90 0 0" scale="0.1 0.1 0.1" align="center" color="#FFFFFF"></a-text>
              </a-entity>
              <!-- Right Controller -->
              <a-entity id="ctLR" hand-controls="hand: right; handModelStyle: lowPoly; color: #15ACCF" laser-controls raycaster="showLine: true; far: 10; interval: 0; objects: .clickable, a-link;" line="color: #7cfc00; opacity: 0.5" visible="true">
                <a-text id="righttext" value="Trigger: shoot a ball\nGrip: Grab large object\nA: Remove small balls"
                position="0 0.08 0" rotation="-90 0 0" scale="0.1 0.1 0.1" align="center" color="#FFFFFF"></a-text>

              </a-entity>
      </a-entity>


    <!-- #### interactive components ##### -->
    <a-entity update></a-entity>
    <!-- <a-box static-body position="5 2.5 0" rotation="0 -90 0" width="1" height="5" color="#7BC8FF"> </a-box> -->
    </a-scene>
    <div id="status">
        <div id="distsensor">far</div>
    </div>  
</body>
</html>